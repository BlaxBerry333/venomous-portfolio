---
import clsx from "clsx";

import Chip from "./Chip.astro";

interface Props {
  title: string;
  label?: string;
  message?: string;
  class?: string;
  backgroundImageUrl?: string;
}

const { title, label, message, class: _class, backgroundImageUrl } = Astro.props as Props;
---

<article
  class={clsx(
    "relative h-[240px] overflow-hidden",
    "rounded-xl border border-gray-300",
    "shadow-md transition-all hover:shadow-xl",
    "group",
    "h-[400px] w-full",
    _class,
  )}
>
  <!-- image -->
  <div
    class={clsx(
      "fixed top-0 left-0 -z-10 h-full w-full",
      "bg-cover bg-center bg-no-repeat",
      "scale-100 grayscale-30 transition-all duration-200 group-hover:scale-110 group-hover:brightness-125 group-hover:grayscale-0",
    )}
    style={backgroundImageUrl ? `background-image: url('${backgroundImageUrl}')` : ""}
  >
  </div>

  <!-- label -->
  {label && <Chip class="absolute top-2 right-2 z-10">{label}</Chip>}

  <!-- information -->
  <div class="absolute bottom-0 left-0 h-[150px] w-full bg-black/70 px-6 py-8">
    {/* title */}
    <h2 class="mb-3 line-clamp-1 text-xl font-bold text-white">{title}</h2>
    {/* message */}
    {message && <p class="line-clamp-2 text-gray-400">{message}</p>}
    <!-- extra -->
    <slot />
  </div>
</article>
