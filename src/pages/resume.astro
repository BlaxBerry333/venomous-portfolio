---
import clsx from "clsx";
import SiteLayout from "@/layouts/site-layout/SiteLayout.astro";
import { DESIGN_CLASSNAME } from "@/styles/design.ts";
import DownloadResumeButton from "@/components/DownloadResumeButton.astro";
import CONFIGS from "@/configs.global";

const experienceYears = new Date().getFullYear() - 2018;

const information = {
  personal: {
    name: "Jiaxu Chen",
    avatarName: "陳",
    title: "フルスタックエンジニア",
  },

  summary: [
    `中国出身、日本在住 ${experienceYears} 年目で ${experienceYears + 1} 年の開発経験を持つフロントエンド中心のフルスタックエンジニア`,
    "jQuery・テンプレートエンジン時代から現在の Next.js・Nuxt.js 等までの技術進化を経験し、フロントエンドアーキテクチャ設計から大規模システム開発まで幅広く対応可能",
    "デザインシステム構築・CI/CD 設計・型安全な開発プロセス構築等を通じて開発チーム全体の生産性向上を実現し、複数のプロジェクトで表彰実績を獲得",
    "個人プロジェクトでもUIライブラリ・ワークフローシステム等の基盤開発を主導し、常に最新技術をキャッチアップして実践活用している",
  ],

  workExperience: [
    {
      id: "company--geniee-cdp",
      period: "2025.05 - 現在",
      company: "G社",
      position: "フロントエンドエンジニア",
      project: "Geniee CDP",
      description:
        "複数チャネルの顧客データを統合・分析し、マーケティングに活用するためのCDP。開発チームの一員として、システム設計およびデータ連携機能の実装を担当。",
      achievements: [
        "Next.js (App Router) を用いて大規模データ基盤と連携する高拡張性・高パフォーマンスを実現。初期ロード時間を短縮し、管理者の操作効率を向上させた",
        "型安全な開発プロセスを構築。ミドルウェアを活用した認証・多組織ユーザー権限管理・IP制限などを実装し、安全かつ拡張性の高い認可機能を提供した",
        "AWS S3、BigQuery、Google Cloud Storage、Azure Blob Storageなど複数クラウドサービスの統合に参画し、異種データソースの一元管理およびデータ取得フローの最適化を実現した",
      ],
      technologies: [
        "Next.js",
        "TypeScript",
        "tRPC",
        "AWS S3",
        "BigQuery",
        "Google Cloud Storage",
        "Looker Studio",
      ],
    },
    {
      id: "company--geniee-chamo",
      period: "2023.08 - 2025.04",
      company: "G社",
      position: "フルスタックエンジニア",
      project: "Geniee Chamo",
      description:
        "ウェブサイト上の顧客対応とマーケティング活動を効率化するチャットツール型SaaS。リアルタイムサポートや自動応答を一元管理し、開発チームの一員として機能開発や既存システム改善に携わった。",
      achievements: [
        "Vite + React + SWC によってホットリロード時間を短縮、サーバー起動時のコールドスタートも大幅に改善した",
        "Django + Django REST Framework を用いてバックエンドAPIを設計・構築。社内オペレーションチームの業務効率を大幅に向上させた",
        "ノードベースの可視化ワークフローシステムをゼロから設計・構築し、従来開発チームが手作業で行っていた設定フローを置き換えることで、営業担当者が数分から数十分で顧客設定を完了できるようにし、導入リードタイムを大幅に短縮した",
        "入社後は四半期ごとのOKR評価で一貫して最高評価(A+)を獲得",
      ],
      technologies: [
        "Vite・React",
        "TypeScript",
        "Node.js",
        "Django・Django REST Framework",
        "Go・Gin",
        "Protocol Buffers",
      ],
    },
    {
      id: "company--skyflag",
      period: "2023.03 - 2023.07",
      company: "S社",
      position: "フロントエンドリード",
      project: "広告収益化プラットフォーム",
      description:
        "モバイルアプリやウェブサイト向けに広告収益化を実現するプラットフォーム。主に成果報酬型広告(オファーウォール)やインセンティブ広告の仕組みを提供し、開発チームの一員として広告表示・管理機能の開発を担当。",
      achievements: [
        "フロントエンドリードとして技術スタックを選定し、React + TypeScript を用いたSPAの再構築により、FCPやLCPを大幅に改善し、ユーザーエンゲージメントを向上させた",
        "Storybook を用いたデザインシステムを導入し、コンポーネントを標準化。UI再設計してデザインの一貫性を確保した",
        "社内向けドキュメントサイトを構築・移行し、新卒メンバーが開発に着手するまでの時間を平均数日から半日に短縮した",
        "ユーザー行動データに基づきA/Bテストを主導し、ロジックを改善。広告クリック率(CTR)を向上させ、事業収益に直接貢献した",
        "全社過去最速で「新人Motto賞」を受賞した",
      ],
      technologies: ["Vite・React", "JavaScript", "TypeScript", "Storybook", "Docusaurus"],
    },
    {
      id: "company--sunrise-park",
      period: "2021.11 - 2023.02",
      company: "S社",
      position: "フルスタックエンジニア",
      project: "Saga Sunrise Park 予約システム",
      description:
        "佐賀県にある大規模な総合スポーツ・文化施設群。その中の施設予約システム開発に携わり、オンラインで各施設の利用申請・予約・管理を行えるサービスを構築した。",
      achievements: [
        "フロントエンドのオーナーシップを発揮し、複数の海外チームが関わるコードベースの統合・リファクタリングを主導。コード品質の標準化と技術的負債返済を推進し、プロジェクトの安定性と保守性を向上させた",
        "Django + GraphQL による API の実装・改善を担当し、フロントエンドとの型安全かつ効率的なデータ連携を実現",
        "海外チームとのクロスレビュー・統合プロセスを主導し、技術ドキュメント整備と多言語対応を推進。複数チーム間のコミュニケーションコストを削減し、開発効率と知識共有を強化した",
      ],
      technologies: [
        "Gatsby・React",
        "TypeScript",
        "GraphQL",
        "Django・Django REST Framework",
        "Docker",
        "MongoDB",
      ],
    },
  ],

  skills: {
    フロントエンド: {
      items: ["React", "Vue", "TypeScript", "Tailwind CSS"],
      color: "blue",
    },
    バックエンド: {
      items: ["Python", "Go", "Node.js"],
      color: "green",
    },
    クラウドインフラ: {
      items: ["Docker", "AWS S3", "BigQuery", "Google Cloud Storage"],
      color: "orange",
    },
  },
} as const;
---

<SiteLayout
  headerClass="print:hidden"
  mainClass="min-h-screen w-full py-8 space-y-16 sm:space-y-32"
  footerClass="print:hidden"
>
  <!-- Download Button -->
  <DownloadResumeButton class="fixed top-20 right-4 z-50" />

  <!-- Personal -->
  <section class="text-center">
    <div
      class={clsx(
        "mx-auto mt-16 mb-4 flex h-32 w-32 items-center justify-center rounded-full shadow-xl",
        DESIGN_CLASSNAME.COLOR_GRADIENT_BACKGROUND,
        "text-6xl font-bold",
      )}
    >
      {information.personal.avatarName}
    </div>
    <h1
      class={clsx(
        "mb-4 text-4xl font-bold sm:text-5xl lg:text-6xl",
        DESIGN_CLASSNAME.COLOR_GRADIENT_TEXT,
      )}
    >
      {information.personal.name}
    </h1>
    <p class="mb-4 text-2xl font-bold text-gray-700 dark:text-gray-300">
      {information.personal.title}
    </p>
    <!-- <a href={`mailto:${information.personal.email}`} class={DESIGN_CLASSNAME.COLOR_GRADIENT_TEXT}>
        {information.personal.email}
      </a> -->
  </section>

  <!-- Summary -->
  <section>
    <h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">自己紹介</h2>
    <div class="space-y-3">
      {
        information.summary.map((item) => (
          <div class="flex items-center space-x-3">
            <div
              class={clsx(
                "h-2 w-2 flex-shrink-0 rounded-full",
                DESIGN_CLASSNAME.COLOR_GRADIENT_BACKGROUND,
              )}
            />
            <p class="text-gray-700 sm:text-lg dark:text-gray-300">{item}</p>
          </div>
        ))
      }
    </div>
  </section>

  <!-- Work Experience -->
  <section>
    <h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">日本での職歴</h2>
    <div class="space-y-8">
      {
        information.workExperience.map((job) => (
          <div class="rounded-xl bg-white px-4 py-6 shadow-lg sm:px-8 sm:py-10 dark:bg-gray-800">
            <div class="mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between">
              <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white">
                  <a
                    href={`${CONFIGS.SITE.BASE}/works/${job.id}.mdx`}
                    class="transition-colors hover:text-purple-600 dark:hover:text-purple-400"
                  >
                    {job.project}
                    <i class="ml-2">🔗</i>
                  </a>
                </h3>
                <span class="text-purple-700 dark:text-purple-400">
                  {job.company} - {job.position}
                </span>
              </div>
              <span class="text-sm text-gray-500 dark:text-gray-400">{job.period}</span>
            </div>
            <p class="mb-4 text-gray-700 dark:text-gray-300">{job.description}</p>
            <div class="mb-4">
              <h4 class="mb-2 font-semibold text-gray-900 dark:text-white">主な成果・担当業務：</h4>
              <ul class="space-y-2">
                {job.achievements.map((achievement) => (
                  <li class="flex items-center space-x-2">
                    <span class="text-lg text-purple-500">▸</span>
                    <span class="text-gray-700 dark:text-gray-300">{achievement}</span>
                  </li>
                ))}
              </ul>
            </div>

            <div class="flex flex-wrap gap-2">
              {job.technologies.map((tech) => (
                <span
                  class={clsx(
                    "rounded-full px-3 py-1 text-xs font-medium",
                    DESIGN_CLASSNAME.COLOR_GRADIENT_BACKGROUND,
                  )}
                >
                  {tech}
                </span>
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </section>

  <!-- Skills -->
  <section>
    <h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">技術スキル</h2>
    <div class="grid gap-6 sm:grid-cols-2">
      {
        Object.entries(information.skills).map(([category, { items, color }]) => (
          <div>
            <h3 class="mb-3 text-lg font-semibold text-gray-900 dark:text-white">{category}</h3>
            <div class="flex flex-wrap gap-2">
              {items.map((skill) => (
                <span
                  class={clsx(
                    "rounded-full px-3 py-1 text-sm font-medium",
                    `bg-${color}-100 text-${color}-800 dark:bg-${color}-600 dark:text-${color}-600`,
                  )}
                >
                  {skill}
                </span>
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </section>
</SiteLayout>
