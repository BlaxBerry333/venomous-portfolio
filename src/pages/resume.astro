---
import clsx from "clsx";

import SiteLayout from "@/layouts/site-layout/SiteLayout.astro";
import { DESIGN_CLASSNAME } from "@/styles/design.ts";
import DownloadResumeButton from "@/components/DownloadResumeButton.astro";
import CONFIGS from "@/configs.global";

const experienceYears = new Date().getFullYear() - 2018;

const information = {
  personal: {
    name: "Jiaxu Chen",
    avatarName: "陳",
    title: "フルスタックエンジニア",
  },
  summary: [
    `中国出身、日本在住 ${experienceYears} 年目で ${experienceYears + 1} 年の開発経験を持つフロントエンド中心のフルスタックエンジニア`,
    "jQuery・テンプレートエンジン時代から現在の Next.js・Nuxt.js 等までの技術進化を経験し、フロントエンドアーキテクチャ設計から大規模システム開発まで幅広く対応可能",
    "デザインシステム構築・CI/CD 設計・型安全な開発プロセス構築等を通じて開発チーム全体の生産性向上を実現し、複数のプロジェクトで表彰実績を獲得",
    "個人プロジェクトでもUIライブラリ・ワークフローシステム等の基盤開発を主導し、常に最新技術をキャッチアップして実践活用している",
  ],
  skills: {
    フロントエンド: ["React", "Vue", "TypeScript", "Dart", "Tailwind CSS"],
    バックエンド: ["Python", "Go", "Node.js"],
    "クラウド・インフラ": ["Docker", "AWS S3", "BigQuery", "Google Cloud Storage"],
  },
  workExperience: [
    {
      id: "company--geniee-cdp",
      period: "2025.05 - 現在",
      company: "G社",
      position: "フロントエンドエンジニア",
      project: "データ統合プラットフォーム",
      achievements: [
        "管理画面を構築し、高パフォーマンスを実現して管理者の操作効率を向上させた",
        "複数クラウドサービスの統合に参画し、異種データソースの一元管理およびデータ取得フローの最適化を実現した",
      ],
      technologies: [
        "Next.js",
        "TypeScript",
        "tRPC",
        "AWS S3",
        "BigQuery",
        "Google Cloud Storage",
        "Looker Studio",
      ],
    },
    {
      id: "company--geniee-chamo",
      period: "2023.08 - 2025.04",
      company: "G社",
      position: "フルスタックエンジニア",
      project: "チャットツール型SaaS",
      achievements: [
        "フロントエンドのリファクタリングによりホットリロード時間を短縮し、開発チーム体験を大幅に改善した",
        "ノードベースの可視化ワークフローシステムを設計・構築し、社内オペレーションチームの業務効率を大幅に向上させた",
        "入社後は四半期ごとのOKR評価で一貫して最高評価(A+)を獲得",
      ],
      technologies: [
        "Vite・React",
        "TypeScript",
        "Node.js",
        "Django・Django REST Framework",
        "Go・Gin",
        "Protocol Buffers",
      ],
    },
    {
      id: "company--skyflag",
      period: "2023.03 - 2023.07",
      company: "S社",
      position: "フロントエンドリード",
      project: "広告収益化プラットフォーム",
      achievements: [
        "フロントエンド技術スタックの選定と再構築により、FCPやLCPを大幅に改善し、ユーザーエンゲージメントを向上させた",
        "社内向けドキュメントサイトを構築・移行し、デザインの一貫性を確保して開発チームの生産性を向上させた",
        "全社過去最速で「新人Motto賞」を受賞した",
      ],
      technologies: ["Vite・React", "JavaScript", "TypeScript", "Storybook", "Docusaurus"],
    },
    {
      id: "company--sunrise-park",
      period: "2021.11 - 2023.02",
      company: "S社",
      position: "フルスタックエンジニア",
      project: "予約システム",
      achievements: [
        "複数の海外チームとのクロスレビュー・統合プロセスを主導し、コードベースのリファクタリングを推進した",
        "フロントエンドと一部バックエンドAPIのリファクタリング・改善を担当した",
        "技術ドキュメント整備と多言語対応を推進した",
      ],
      technologies: [
        "Gatsby・React",
        "TypeScript",
        "GraphQL",
        "Django・Django REST Framework",
        "Docker",
        "MongoDB",
      ],
    },
  ],
} as const;
---

<SiteLayout
  headerClass="print:hidden"
  mainClass="min-h-screen w-full py-8 space-y-16 sm:space-y-32"
  footerClass="print:hidden"
>
  <!-- Download Button -->
  <DownloadResumeButton class="fixed top-20 right-4 z-50" />

  <!-- Personal -->
  <section class="text-center">
    <div
      class={clsx(
        "mx-auto mt-16 mb-4 flex h-32 w-32 items-center justify-center rounded-full shadow-xl",
        DESIGN_CLASSNAME.COLOR_GRADIENT_BACKGROUND,
        "text-6xl font-bold",
      )}
    >
      {information.personal.avatarName}
    </div>
    <h1
      class={clsx(
        "mb-4 text-4xl font-bold sm:text-5xl lg:text-6xl",
        DESIGN_CLASSNAME.COLOR_GRADIENT_TEXT,
      )}
    >
      {information.personal.name}
    </h1>
    <p class="mb-4 text-2xl font-bold text-gray-700 dark:text-gray-300">
      {information.personal.title}
    </p>
    <!-- <a href={`mailto:${information.personal.email}`} class={DESIGN_CLASSNAME.COLOR_GRADIENT_TEXT}>
        {information.personal.email}
      </a> -->
  </section>

  <!-- Summary -->
  <section>
    <h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">自己紹介</h2>
    <div class="space-y-3">
      {
        information.summary.map((item) => (
          <div class="flex items-center space-x-3">
            <span class="hidden text-2xl text-purple-500 sm:block">▸</span>
            <p class="text-gray-700 sm:text-lg dark:text-gray-300">{item}</p>
          </div>
        ))
      }
      <div class="flex items-center space-x-3">
        <span class="hidden text-2xl text-purple-500 sm:block">▸</span>
        <a
          href={`${CONFIGS.SITE.BASE}/works`}
          class="text-lg font-bold text-purple-700 hover:underline dark:text-purple-400"
        >
          作品集を見る...
        </a>
      </div>
    </div>
  </section>

  <!-- Work Experience -->
  <section>
    <h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">日本での職歴</h2>
    <div class="space-y-8">
      {
        information.workExperience.map((job) => (
          <div class="rounded-xl bg-white px-4 py-6 shadow-lg sm:px-8 sm:py-10 dark:bg-gray-800">
            <div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between">
              <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white">{job.project}</h3>
                <span class="font-bold text-purple-700 dark:text-purple-400">
                  {job.company} - {job.position}
                </span>
              </div>
              <span class="text-sm text-gray-500 dark:text-gray-400">{job.period}</span>
            </div>
            <div class="mb-6">
              <h4 class="mb-2 font-semibold text-gray-900 dark:text-white">主な成果・担当業務：</h4>
              <ul class="space-y-2">
                {job.achievements.map((achievement) => (
                  <li>
                    <span class="text-gray-700 dark:text-gray-300">{achievement}</span>
                  </li>
                ))}
                <a
                  href={`${CONFIGS.SITE.BASE}/works/${job.id}.mdx`}
                  class="font-bold text-purple-700 hover:underline dark:text-purple-400"
                >
                  詳細を見る...
                </a>
              </ul>
            </div>
            <div class="flex flex-wrap gap-2">
              {job.technologies.map((tech) => (
                <span
                  class={clsx(
                    "rounded-full px-3 py-1 text-xs font-medium",
                    DESIGN_CLASSNAME.COLOR_GRADIENT_BACKGROUND,
                  )}
                >
                  {tech}
                </span>
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </section>

  <!-- Skills -->
  <section>
    <h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">技術スキル</h2>
    <div class="grid gap-6 sm:grid-cols-2">
      {
        Object.entries(information.skills).map(([category, items]) => (
          <div>
            <h3 class="mb-3 text-lg font-semibold text-gray-900 dark:text-white">{category}</h3>
            <div class="flex flex-wrap gap-2">
              {items.map((skill) => (
                <span
                  class={clsx(
                    "rounded-full px-3 py-1 text-sm font-medium",
                    "text-purple-700 outline-2 outline-offset-[-2px] outline-purple-700 dark:text-purple-400 dark:outline-purple-400",
                  )}
                >
                  {skill}
                </span>
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </section>
</SiteLayout>
